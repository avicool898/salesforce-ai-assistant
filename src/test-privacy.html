<!DOCTYPE html>
<html>
<head>
    <title>Privacy Filter Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .result { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 3px; }
        .original { background: #ffe6e6; }
        .filtered { background: #e6ffe6; }
        pre { white-space: pre-wrap; font-size: 12px; }
    </style>
</head>
<body>
    <h1>üõ°Ô∏è Privacy Filter Test</h1>
    
    <div class="test-section">
        <h2>Test 1: PII Filtering</h2>
        <div class="result original">
            <strong>Original:</strong>
            <pre id="original1"></pre>
        </div>
        <div class="result filtered">
            <strong>Filtered:</strong>
            <pre id="filtered1"></pre>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Test 2: Salesforce ID Filtering</h2>
        <div class="result original">
            <strong>Original:</strong>
            <pre id="original2"></pre>
        </div>
        <div class="result filtered">
            <strong>Filtered:</strong>
            <pre id="filtered2"></pre>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Test 3: Sensitive Field Filtering</h2>
        <div class="result original">
            <strong>Original:</strong>
            <pre id="original3"></pre>
        </div>
        <div class="result filtered">
            <strong>Filtered:</strong>
            <pre id="filtered3"></pre>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Privacy Validation Report</h2>
        <div class="result">
            <pre id="validation-report"></pre>
        </div>
    </div>

    <script src="js/privacy-filter.js"></script>
    <script>
        // Initialize privacy filter
        const privacyFilter = new PrivacyFilter();
        
        // Test data with various sensitive information
        const testData1 = `
Contact John Doe at john.doe@company.com or call (555) 123-4567.
His SSN is 123-45-6789 and credit card is 4532 1234 5678 9012.
Address: 123 Main Street, Anytown, NY 12345
DOB: 01/15/1985
`;
        
        const testData2 = `
Record ID: 0031234567890ABC
Session ID: 00D123456789012!ARMAQFJbKdoL1234567890abcdefghijklmnopqrstuvwxyz
API Key: sk-1234567890abcdefghijklmnopqrstuvwxyz
User ID: 005123456789012
Org ID: 00D123456789012
`;
        
        const testData3 = `
{
  "password": "mySecretPassword123",
  "api_key": "sk-secret123456789",
  "ssn": "987-65-4321",
  "credit_card": "5555-4444-3333-2222",
  "salary": "$75000",
  "personal_email": "private@email.com"
}
`;
        
        // Test filtering
        const settings = {
            removePII: true,
            removeSalesforceIds: true,
            removeSensitiveFields: true,
            maskingChar: 'REDACTED'
        };
        
        // Filter test data
        const filtered1 = privacyFilter.filterText(testData1, settings);
        const filtered2 = privacyFilter.filterText(testData2, settings);
        const filtered3 = privacyFilter.filterText(testData3, settings);
        
        // Display results
        document.getElementById('original1').textContent = testData1;
        document.getElementById('filtered1').textContent = filtered1;
        
        document.getElementById('original2').textContent = testData2;
        document.getElementById('filtered2').textContent = filtered2;
        
        document.getElementById('original3').textContent = testData3;
        document.getElementById('filtered3').textContent = filtered3;
        
        // Generate validation report
        const validation1 = privacyFilter.validateContentSafety(testData1);
        const validation2 = privacyFilter.validateContentSafety(testData2);
        const validation3 = privacyFilter.validateContentSafety(testData3);
        
        const report = `
Test 1 Validation:
- Risk Level: ${validation1.riskLevel}
- Issues Found: ${validation1.issues.length}
- Issues: ${validation1.issues.map(i => `${i.category} (${i.count})`).join(', ')}

Test 2 Validation:
- Risk Level: ${validation2.riskLevel}
- Issues Found: ${validation2.issues.length}
- Issues: ${validation2.issues.map(i => `${i.category} (${i.count})`).join(', ')}

Test 3 Validation:
- Risk Level: ${validation3.riskLevel}
- Issues Found: ${validation3.issues.length}
- Issues: ${validation3.issues.map(i => `${i.category} (${i.count})`).join(', ')}

Privacy Reports:
${JSON.stringify(privacyFilter.generatePrivacyReport(testData1, filtered1), null, 2)}
`;
        
        document.getElementById('validation-report').textContent = report;
    </script>
</body>
</html>